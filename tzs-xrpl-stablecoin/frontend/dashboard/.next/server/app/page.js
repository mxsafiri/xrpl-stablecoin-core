(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},23950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var a=s(67096),r=s(16132),n=s(37284),i=s.n(n),l=s(32564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68203)),"/Users/victormuhagachi/CascadeProjects/tzs-xrpl-stablecoin/frontend/dashboard/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,79113)),"/Users/victormuhagachi/CascadeProjects/tzs-xrpl-stablecoin/frontend/dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/victormuhagachi/CascadeProjects/tzs-xrpl-stablecoin/frontend/dashboard/src/app/page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},74872:(e,t,s)=>{Promise.resolve().then(s.bind(s,41517))},41517:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Dashboard});var a=s(30784),r=s(9885),n=s(10566),i=s(78126);function cn(...e){return(0,i.m6)((0,n.W)(e))}var l=s(97849),c=s(23109),o=s(71163),d=s(89815),x=s(91672);let m=[{id:"overview",name:"Overview",icon:l.Z},{id:"tokens",name:"Token Operations",icon:c.Z},{id:"wallets",name:"Wallets",icon:o.Z},{id:"transactions",name:"Transactions",icon:d.Z},{id:"multisig",name:"Multisig",icon:x.Z}];function Sidebar({activeTab:e,onTabChange:t}){return(0,a.jsxs)("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:[a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(c.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"TZS"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Stablecoin"})]})]})}),a.jsx("nav",{className:"px-4 space-y-1",children:m.map(s=>{let r=s.icon;return(0,a.jsxs)("button",{onClick:()=>t(s.id),className:cn("w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",e===s.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a.jsx(r,{className:"w-5 h-5 mr-3"}),s.name]},s.id)})}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Network"}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Testnet"})]})})})]})}var u=s(14172),h=s(50257),g=s(69518),p=s(3514),f=s(93680);function Header({isConnected:e}){return a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e?a.jsx(u.Z,{className:"w-4 h-4 text-green-500"}):a.jsx(h.Z,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:`text-sm ${e?"text-green-600":"text-red-600"}`,children:e?"Connected":"Disconnected"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(g.Z,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search transactions...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-600",children:[a.jsx(p.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(f.Z,{className:"w-4 h-4 text-gray-600"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin"})]})]})]})})}let b=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));b.displayName="Card";let y=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:cn("flex flex-col space-y-1.5 p-6",e),...t}));y.displayName="CardHeader";let j=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:cn("text-2xl font-semibold leading-none tracking-tight",e),...t}));j.displayName="CardTitle";let v=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:cn("text-sm text-muted-foreground",e),...t}));v.displayName="CardDescription";let N=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:cn("p-6 pt-0",e),...t}));N.displayName="CardContent";let w=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:cn("flex items-center p-6 pt-0",e),...t}));w.displayName="CardFooter";var X=s(76637),T=s(91971);let S=(0,T.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...n},i)=>{let l=r?X.g7:"button";return a.jsx(l,{className:cn(S({variant:t,size:s,className:e})),ref:i,...n})});k.displayName="Button";let _=(0,T.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:e,variant:t,...s}){return a.jsx("div",{className:cn(_({variant:t}),e),...s})}var A=s(20644),C=s(8042),$=s(91964),W=s(28089),P=s(36606);let XRPLService=class XRPLService{constructor(){this.isConnected=!1,this.client=new P.Client("wss://s.altnet.rippletest.net:51233")}async connect(){this.isConnected||(await this.client.connect(),this.isConnected=!0)}async disconnect(){this.isConnected&&(await this.client.disconnect(),this.isConnected=!1)}async getAccountInfo(e){return await this.connect(),await this.client.request({command:"account_info",account:e,ledger_index:"validated"})}async getAccountTransactions(e,t=20){return await this.connect(),await this.client.request({command:"account_tx",account:e,limit:t,ledger_index_min:-1,ledger_index_max:-1})}async getTokenBalance(e,t,s){try{let a=await this.getAccountInfo(e),r=a.result.account_data,n=r.Lines||[],i=n.find(e=>e.currency===t&&e.account===s);return i?parseFloat(i.balance):0}catch(e){return console.error("Error fetching token balance:",e),0}}async getXRPBalance(e){try{let t=await this.getAccountInfo(e);return parseFloat(t.result.account_data.Balance)/1e6}catch(e){if(e.message?.includes("Account not found"))return 0;return console.error("Error fetching XRP balance:",e),0}}subscribeToTransactions(e,t){this.connect().then(()=>{this.client.request({command:"subscribe",accounts:e}),this.client.on("transaction",t)})}unsubscribeFromTransactions(){this.client.removeAllListeners("transaction")}};let Z=new XRPLService;function useRealTimeData(){let[e,t]=(0,r.useState)({totalSupply:"0",circulation:"0",activeWallets:"0",transactions24h:"0"}),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)({}),[l,c]=(0,r.useState)(!0),o="rLh7ddit5RQ5YHsCV9Pixz68ydncq8rWz",d="rPwmFYdgmtriNnobcgeEjKH4tTogYEwbE3",fetchWalletBalances=async()=>{try{let e=await Z.getXRPBalance(o),t=await Z.getTokenBalance(d,"TZS",o);i({[o]:`${e.toFixed(2)} XRP`,[d]:`${t.toFixed(0)} TZS`})}catch(e){console.error("Error fetching wallet balances:",e)}},fetchTransactions=async()=>{try{let e=await Z.getAccountTransactions(o,10),s=await Z.getAccountTransactions(d,10),r=[...e.result.transactions,...s.result.transactions],n=r.map(e=>{let t=e.tx||e,s=e.meta||{};return{hash:t.hash||t.Hash,type:getTransactionType(t),amount:getTransactionAmount(t,s),from:t.Account,to:t.Destination||"N/A",status:"tesSUCCESS"===s.TransactionResult?"validated":"failed",timestamp:formatTimestamp(t.date)}}).slice(0,10);a(n),t(e=>({...e,transactions24h:n.length.toString()}))}catch(e){console.error("Error fetching transactions:",e)}},calculateStats=async()=>{try{await Z.getTokenBalance(d,"TZS",o),t(e=>({...e,totalSupply:"0",circulation:"0",activeWallets:"0"}))}catch(e){console.error("Error calculating stats:",e),t(e=>({...e,totalSupply:"0",circulation:"0",activeWallets:"0"}))}};return(0,r.useEffect)(()=>{let setupRealTimeMonitoring=async()=>{try{Z.subscribeToTransactions([o,d],e=>{let t={hash:e.transaction.hash,type:getTransactionType(e.transaction),amount:getTransactionAmount(e.transaction,e.meta),from:e.transaction.Account,to:e.transaction.Destination||"N/A",status:"tesSUCCESS"===e.meta.TransactionResult?"validated":"failed",timestamp:"Just now"};a(e=>[t,...e.slice(0,9)])})}catch(e){console.error("Error setting up real-time monitoring:",e)}};return setupRealTimeMonitoring(),()=>{Z.unsubscribeFromTransactions()}},[o,d]),(0,r.useEffect)(()=>{let fetchInitialData=async()=>{c(!0),await Promise.all([fetchWalletBalances(),fetchTransactions(),calculateStats()]),c(!1)};fetchInitialData();let e=setInterval(()=>{fetchWalletBalances(),fetchTransactions(),calculateStats()},3e4);return()=>clearInterval(e)},[]),{stats:e,transactions:s,walletBalances:n,isLoading:l,refreshData:()=>{fetchWalletBalances(),fetchTransactions(),calculateStats()}}}function getTransactionType(e){return"TrustSet"===e.TransactionType?"mint":(e.TransactionType,"transfer")}function getTransactionAmount(e,t){return e.Amount?"string"==typeof e.Amount?`${(parseInt(e.Amount)/1e6).toFixed(2)} XRP`:`${e.Amount.value} ${e.Amount.currency}`:"0"}function formatTimestamp(e){if(!e)return"Unknown";let t=new Date((e+946684800)*1e3),s=new Date,a=s.getTime()-t.getTime(),r=Math.floor(a/6e4);return r<1?"Just now":r<60?`${r} min ago`:r<1440?`${Math.floor(r/60)} hr ago`:t.toLocaleDateString()}function DashboardOverview(){let{stats:e,transactions:t,isLoading:s,refreshData:r}=useRealTimeData(),n=t.slice(0,5);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Overview"}),a.jsx("p",{className:"text-muted-foreground",children:"Monitor your TZS stablecoin operations"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(k,{variant:"outline",size:"sm",onClick:r,disabled:s,className:"flex items-center space-x-2",children:[a.jsx(A.Z,{className:`h-4 w-4 ${s?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]}),(0,a.jsxs)(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"XRPL Connected"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{className:"text-sm font-medium",children:"Total Supply"})}),(0,a.jsxs)(N,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s?"...":Number(e.totalSupply).toLocaleString()}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"TZS tokens issued"})]})]}),(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{className:"text-sm font-medium",children:"In Circulation"})}),(0,a.jsxs)(N,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s?"...":Number(e.circulation).toLocaleString()}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"TZS in active use"})]})]}),(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{className:"text-sm font-medium",children:"Active Wallets"})}),(0,a.jsxs)(N,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s?"...":e.activeWallets}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique addresses"})]})]}),(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{className:"text-sm font-medium",children:"24h Transactions"})}),(0,a.jsxs)(N,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s?"...":e.transactions24h}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent activity"})]})]})]}),(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{children:"Quick Actions"})}),a.jsx(N,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(k,{className:"flex items-center justify-center",children:[a.jsx(c.Z,{className:"w-5 h-5 mr-2"}),"Mint Tokens"]}),(0,a.jsxs)(k,{variant:"destructive",className:"flex items-center justify-center",children:[a.jsx(d.Z,{className:"w-5 h-5 mr-2"}),"Burn Tokens"]}),(0,a.jsxs)(k,{variant:"secondary",className:"flex items-center justify-center",children:[a.jsx(o.Z,{className:"w-5 h-5 mr-2"}),"Transfer Tokens"]})]})})]}),(0,a.jsxs)(b,{children:[a.jsx(y,{children:a.jsx(j,{children:"Recent Transactions"})}),a.jsx(N,{children:a.jsx("div",{className:"space-y-4",children:s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[a.jsx(A.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"}),a.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading transactions..."})]}):0===n.length?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{className:"text-sm",children:"No recent transactions"})}):n.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"mint"===e.type?"bg-green-100 text-green-600":"burn"===e.type?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:"mint"===e.type?a.jsx(C.Z,{className:"h-4 w-4"}):"burn"===e.type?a.jsx($.Z,{className:"h-4 w-4"}):a.jsx(W.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.amount}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.from.slice(0,8),"...",e.from.slice(-6)," → ","N/A"===e.to?"N/A":`${e.to.slice(0,8)}...${e.to.slice(-6)}`]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx(Badge,{variant:"validated"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.timestamp})]})]},e.hash))})})]})]})}var R=s(22385),q=s(28348),M=s(15537),L=s(21145);let getAuthToken=()=>localStorage.getItem("auth_token")||null,D=L.Z.create({baseURL:"http://localhost:3000/api",headers:{"Content-Type":"application/json"}});D.interceptors.request.use(e=>{let t=getAuthToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e});let E={mint:async(e,t,s)=>{let a=await D.post("/token/mint",{amount:parseFloat(e),destinationWallet:t,reference:s});return a.data},burn:async(e,t,s)=>{let a=await D.post("/token/burn",{amount:parseFloat(e),sourceWallet:t,reference:s});return a.data},transfer:async(e,t,s)=>{let a=await D.post("/token/transfer",{amount:parseFloat(e),sourceWallet:t,destinationWallet:s});return a.data},getTransactions:async()=>{let e=await D.get("/token/transactions");return e.data},getBalance:async e=>{let t=await D.get(`/token/balance/${e}`);return t.data}},F={getPendingOperations:async()=>{let e=await D.get("/token/pending-operations");return e.data},approve:async e=>{let t=await D.post(`/token/approve/${e}`);return t.data},getCollateralBalance:async()=>{let e=await D.get("/token/collateral");return e.data}},B={login:async e=>{let t=await D.post("/auth/login",{walletAddress:e,signature:"test_signature",message:"Login to TZS Dashboard"});return t.data},loginAsAdmin:async()=>{try{let e=await D.post("/auth/login",{walletAddress:"rph2dj1V9ZoWpSEz8YKgmSm8YpNCQJL8ZM",signature:"test_signature",message:"Admin login"});return e.data.token&&(localStorage.setItem("auth_token",e.data.token),localStorage.setItem("user_role",e.data.user.role)),e.data}catch(e){throw console.error("Admin login failed:",e),e}}};function TokenOperations(){let[e,t]=(0,r.useState)("mint"),[s,n]=(0,r.useState)({amount:"",destinationWallet:"",sourceWallet:"",reference:""}),[i,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("auth_token");e&&(h(!0),fetchRecentTransactions())},[]);let fetchRecentTransactions=async()=>{try{d(!0),m(null);let e=await E.getTransactions();l(e.transactions||[])}catch(e){m("Failed to fetch recent transactions"),console.error("Error fetching transactions:",e)}finally{d(!1)}},handleLogin=async()=>{try{d(!0),await B.loginAsAdmin(),h(!0),m(null),await fetchRecentTransactions()}catch(e){m("Failed to authenticate. Please try again."),console.error("Authentication error:",e),d(!1)}},handleSubmit=async t=>{if(t.preventDefault(),!u){m("Please login first");return}try{switch(d(!0),m(null),parseFloat(s.amount),s.destinationWallet,s.sourceWallet,s.reference,e){case"mint":await E.mint(s.amount,s.destinationWallet,s.reference);break;case"burn":await E.burn(s.amount,s.sourceWallet,s.reference);break;case"transfer":await E.transfer(s.amount,s.sourceWallet,s.destinationWallet)}n({amount:"",destinationWallet:"",sourceWallet:"",reference:""}),await fetchRecentTransactions()}catch(t){m(t.message||`Failed to ${e} tokens`),console.error(`${e} error:`,t)}finally{d(!1)}},formatWallet=e=>e&&e.length>10?`${e.slice(0,6)}...${e.slice(-4)}`:e||"N/A",formatTime=e=>{let t=new Date(e),s=new Date,a=s.getTime()-t.getTime(),r=Math.floor(a/6e4);if(r<1)return"Just now";if(r<60)return`${r} min ago`;let n=Math.floor(r/60);if(n<24)return`${n} hour${n>1?"s":""} ago`;let i=Math.floor(n/24);return`${i} day${i>1?"s":""} ago`};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Token Operations"}),a.jsx("p",{className:"text-gray-600",children:"Mint, burn, and transfer TZS tokens"})]}),!u&&a.jsx("button",{onClick:handleLogin,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:o,children:o?"Authenticating...":"Login as Admin"})]}),x&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsx("p",{className:"text-red-700",children:x})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"mint",name:"Mint Tokens",icon:R.Z,color:"text-green-600"},{id:"burn",name:"Burn Tokens",icon:q.Z,color:"text-red-600"},{id:"transfer",name:"Transfer Tokens",icon:M.Z,color:"text-blue-600"}].map(s=>{let r=s.icon;return a.jsx("button",{onClick:()=>t(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${e===s.id?`border-blue-500 ${s.color}`:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(r,{className:"w-4 h-4"}),a.jsx("span",{children:s.name})]})},s.id)})})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (TZS)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"number",value:s.amount,onChange:e=>n({...s,amount:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount",required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:a.jsx(c.Z,{className:"w-5 h-5 text-gray-400"})})]})]}),"mint"===e&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination Wallet"}),a.jsx("input",{type:"text",value:s.destinationWallet,onChange:e=>n({...s,destinationWallet:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0})]}),"burn"===e&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source Wallet"}),a.jsx("input",{type:"text",value:s.sourceWallet,onChange:e=>n({...s,sourceWallet:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0})]}),"transfer"===e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Wallet"}),a.jsx("input",{type:"text",value:s.sourceWallet,onChange:e=>n({...s,sourceWallet:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Wallet"}),a.jsx("input",{type:"text",value:s.destinationWallet,onChange:e=>n({...s,destinationWallet:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference ID (Optional)"}),a.jsx("input",{type:"text",value:s.reference,onChange:e=>n({...s,reference:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter reference ID"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:o||!u,className:`px-6 py-3 rounded-lg font-medium text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"mint"===e?"bg-green-600 hover:bg-green-700":"burn"===e?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:o?"Processing...":"mint"===e?"Mint Tokens":"burn"===e?"Burn Tokens":"Transfer Tokens"})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Operations"})}),a.jsx("div",{className:"p-6",children:o&&0===i.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading recent transactions..."})]}):0===i.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:u?"No recent transactions found":"Please login to view recent transactions"}):a.jsx("div",{className:"space-y-4",children:i.slice(0,5).map(e=>{let t=e.operation_type.charAt(0).toUpperCase()+e.operation_type.slice(1),s=e.destination_wallet||e.source_wallet;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${"mint"===e.operation_type?"bg-green-100":"burn"===e.operation_type?"bg-red-100":"bg-blue-100"}`,children:"mint"===e.operation_type?a.jsx(R.Z,{className:"w-5 h-5 text-green-600"}):"burn"===e.operation_type?a.jsx(q.Z,{className:"w-5 h-5 text-red-600"}):a.jsx(M.Z,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[t," ",e.amount.toLocaleString()," TZS"]}),a.jsx("p",{className:"text-sm text-gray-500 font-mono",children:formatWallet(s)})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:formatTime(e.created_at)})]})]},e.id)})})})]})]})}var O=s(56388);function WalletManagement(){let[e,t]=(0,r.useState)(!1),{walletBalances:s,isLoading:n}=useRealTimeData(),i="rLh7ddit5RQ5YHsCV9Pixz68ydncq8rWz",l="rPwmFYdgmtriNnobcgeEjKH4tTogYEwbE3",c=[{name:"Admin Wallet",address:i,balance:n?"Loading...":s[i]||"0.00 XRP",type:"admin"},{name:"Treasury Wallet",address:l,balance:n?"Loading...":s[l]||"0.00 TZS",type:"treasury"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Wallet Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your XRPL wallets and balances"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"admin"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:e.type})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("code",{className:"flex-1 text-sm bg-gray-100 p-2 rounded font-mono",children:e.address}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:a.jsx(O.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Balance"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:e.balance})]})]})]},t))})]})}function TransactionMonitor(){let[e,t]=(0,r.useState)("all"),[s,n]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null),fetchTransactions=async()=>{try{l(!0),o(null);let e=await E.getTransactions();n(e.transactions||[])}catch(e){o("Failed to fetch transactions"),console.error("Error fetching transactions:",e)}finally{l(!1)}};(0,r.useEffect)(()=>{fetchTransactions()},[]);let formatAmount=e=>`${parseFloat(e).toLocaleString()} TZS`,formatWallet=e=>e.length>10?`${e.slice(0,6)}...${e.slice(-4)}`:e,formatTime=e=>{let t=new Date(e),s=new Date,a=s.getTime()-t.getTime(),r=Math.floor(a/6e4);if(r<1)return"Just now";if(r<60)return`${r} min ago`;let n=Math.floor(r/60);if(n<24)return`${n} hour${n>1?"s":""} ago`;let i=Math.floor(n/24);return`${i} day${i>1?"s":""} ago`},d=s.filter(t=>"all"===e||t.type.toLowerCase()===e.toLowerCase());return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transaction Monitor"}),a.jsx("p",{className:"text-gray-600",children:"Real-time XRPL transaction tracking"})]}),(0,a.jsxs)("button",{onClick:fetchTransactions,disabled:i,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a.jsx(A.Z,{className:`w-4 h-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Transactions"}),(0,a.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"mint",children:"Mint"}),a.jsx("option",{value:"burn",children:"Burn"}),a.jsx("option",{value:"transfer",children:"Transfer"})]})]}),c&&a.jsx("div",{className:"px-6 py-4 bg-red-50 border-l-4 border-red-400",children:a.jsx("p",{className:"text-red-700",children:c})}),a.jsx("div",{className:"overflow-x-auto",children:i?(0,a.jsxs)("div",{className:"px-6 py-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading transactions..."})]}):0===d.length?a.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No transactions found"}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hash"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"To"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:formatWallet(e.xrpl_transaction_hash)}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"mint"===e.type?"bg-green-100 text-green-800":"burn"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:formatAmount(e.amount)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:formatWallet(e.from_wallet)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:formatWallet(e.to_wallet)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:formatTime(e.created_at)})]},e.id||t))})]})})]})]})}var I=s(6645),z=s(1264),U=s(56206);function MultisigPanel(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),fetchPendingOperations=async()=>{try{n(!0),l(null);let e=await F.getPendingOperations();t(e.operations||[])}catch(e){l("Failed to fetch pending operations"),console.error("Error fetching pending operations:",e)}finally{n(!1)}};(0,r.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(o(!0),fetchPendingOperations()):n(!1)},[]);let handleLogin=async()=>{try{n(!0),await B.loginAsAdmin(),o(!0),l(null),await fetchPendingOperations()}catch(e){l("Failed to authenticate. Please try again."),console.error("Authentication error:",e),n(!1)}},handleApprove=async e=>{try{await F.approve(e),fetchPendingOperations()}catch(e){l("Failed to approve operation"),console.error("Error approving operation:",e)}},handleReject=e=>{console.log("Rejecting operation:",e)},formatAmount=e=>e?`${e.toLocaleString()} TZS`:"N/A",formatWallet=e=>e&&e.length>10?`${e.slice(0,6)}...${e.slice(-4)}`:e||"N/A",formatTime=e=>{let t=new Date(e),s=new Date,a=s.getTime()-t.getTime(),r=Math.floor(a/6e4);if(r<1)return"Just now";if(r<60)return`${r} min ago`;let n=Math.floor(r/60);if(n<24)return`${n} hour${n>1?"s":""} ago`;let i=Math.floor(n/24);return`${i} day${i>1?"s":""} ago`};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Multisig Operations"}),a.jsx("p",{className:"text-gray-600",children:"Review and approve pending operations"})]}),a.jsx("div",{className:"flex space-x-3",children:c?(0,a.jsxs)("button",{onClick:fetchPendingOperations,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(A.Z,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}):(0,a.jsxs)("button",{onClick:handleLogin,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"}),"Login as Admin"]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Pending Approvals"})}),i&&a.jsx("div",{className:"px-6 py-4 bg-red-50 border-l-4 border-red-400",children:a.jsx("p",{className:"text-red-700",children:i})}),a.jsx("div",{className:"divide-y divide-gray-200",children:s?(0,a.jsxs)("div",{className:"px-6 py-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading pending operations..."})]}):0===e.length?a.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No pending operations"}):e.map(e=>a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"mint"===e.operation_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.operation_type.charAt(0).toUpperCase()+e.operation_type.slice(1)}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:formatAmount(e.operation_data.amount)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"mint"===e.operation_type?"Destination":"Source"}),a.jsx("p",{className:"font-mono text-sm text-gray-900",children:formatWallet(e.operation_data.destinationWallet||e.operation_data.sourceWallet)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),a.jsx("p",{className:"text-sm text-gray-900",children:formatTime(e.created_at)})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Signatures"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.current_signatures,"/",e.required_signatures]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.current_signatures/e.required_signatures*100}%`}})}),(0,a.jsxs)("div",{className:"mt-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Signed by: "}),a.jsx("span",{className:"text-sm text-gray-900",children:e.signers.length>0?e.signers.join(", "):"None"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 ml-6",children:[(0,a.jsxs)("button",{onClick:()=>handleApprove(e.id),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(z.Z,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,a.jsxs)("button",{onClick:()=>handleReject(e.id),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(U.Z,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})},e.id))})]})]})}function Dashboard(){let[e,t]=(0,r.useState)("overview"),[s,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{n(!0)},[]),(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Sidebar,{activeTab:e,onTabChange:e=>t(e)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Header,{isConnected:s}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:(()=>{switch(e){case"overview":default:return a.jsx(DashboardOverview,{});case"tokens":return a.jsx(TokenOperations,{});case"wallets":return a.jsx(WalletManagement,{});case"transactions":return a.jsx(TransactionMonitor,{});case"multisig":return a.jsx(MultisigPanel,{})}})()})]})]})}},68203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c});var a=s(95153);let r=(0,a.createProxy)(String.raw`/Users/victormuhagachi/CascadeProjects/tzs-xrpl-stablecoin/frontend/dashboard/src/app/page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,c=l}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[485,131,326],()=>__webpack_exec__(23950));module.exports=s})();